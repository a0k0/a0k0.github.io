<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <title>LoL 3D model viewer</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="description" content="イラスト／WEBデザイン／その他デザイン　各種ご依頼・お問い合わせはこちらから。">
  <meta property="og:title" content="LoL 3D model viewer" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://a0k0.me" />
  <meta property="og:image" content="https://a0k0.me/img/illustration/underthesea.jpg" />
  <meta property="og:site_name" content="poco" />
  <meta property="og:description" content="portforio of illustration and deisgn site." />
  <meta property="fb:app_id" content="227318177890145" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@a0k0" />
  <meta name="twitter:player" content="@a0k0" />

  <link rel="icon" type="image/png" href="img/favicon.png">
  <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,600,700" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="../css/style.css" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-122073463-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-122073463-1');
  </script>
</head>
<body>
<div id="container"></div>
<div id="info">
	<a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> collada loader - skinning
	| Dancing Stormtrooper by <a href="https://sketchfab.com/strykerdoesgames" target="_blank" rel="noopener">StrykerDoesAnimation</a> is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC Attribution</a>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script>
<script src="js/ColladaLoader.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/WebGL.js"></script>
<script src="js/stats.min.js"></script>

<script>

	if ( WEBGL.isWebGLAvailable() === false ) {
		document.body.appendChild( WEBGL.getWebGLErrorMessage() );
	}

	var container, stats, clock, controls;
	var camera, scene, renderer, mixer;

	init();
	animate();



	function init() {
		container = document.getElementById( 'container' );

		camera = new THREE.PerspectiveCamera( 25, window.innerWidth / window.innerHeight, 1, 1000 );
		camera.position.set( 15, 10, - 15 );

		scene = new THREE.Scene();
		clock = new THREE.Clock();

		// collada

		var loader = new THREE.ColladaLoader();
		loader.load( 'model/lulu1.dae', function ( collada ) {

			var animations = collada.animations;
			var avatar = collada.scene;

			avatar.traverse( function( node ) {
				if ( node.isSkinnedMesh ) {
					node.frustumCulled = false;
				}
			});

			mixer = new THREE.AnimationMixer( avatar );
			var action = mixer.clipAction( animations[ 0 ] ).play();
			scene.add( avatar );
		} );

		//

		var gridHelper = new THREE.GridHelper( 10, 20 );
		scene.add( gridHelper );

		//

		var ambientLight = new THREE.AmbientLight( 0xffffff, 0.2 );
		scene.add( ambientLight );

		var pointLight = new THREE.PointLight( 0xffffff, 0.8 );
		scene.add( camera );
		camera.add( pointLight );

		//

		renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );
		container.appendChild( renderer.domElement );

		//

		controls = new THREE.OrbitControls( camera, renderer.domElement );
		controls.screenSpacePanning = true;
		controls.minDistance = 5;
		controls.maxDistance = 40;
		controls.target.set( 0, 2, 0 );
		controls.update();

		//

		stats = new Stats();
		container.appendChild( stats.dom );

		//

		window.addEventListener( 'resize', onWindowResize, false );

	}

	function onWindowResize() {

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize( window.innerWidth, window.innerHeight );

	}

	function animate() {

		requestAnimationFrame( animate );
		render();
		stats.update();

	}

	function render() {

		var delta = clock.getDelta();

		if ( mixer !== undefined ) {
			mixer.update( delta );
		}

		renderer.render( scene, camera );

	}

</script>

</body>
</html>
